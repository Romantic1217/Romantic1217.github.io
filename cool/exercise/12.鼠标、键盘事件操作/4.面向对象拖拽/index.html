<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			body{
				margin: 0;
			}
			#div1{
				position: absolute;
				width: 100px;
				height: 100px;
				background: red;
			}
		</style>
	</head>
	<body>
		<div id="div1"></div>
		<script type="text/javascript">
			
			var div1 = document.getElementById('div1');
			//创建构造函数，第一个大写字母为驼峰命名法
			var Drag = function(dragEle){
				//保存当前的拖拽元素，传入进来的这个元素
				this.dragEle = dragEle;
				this.isRange = false;
				this.dragDown();
			};
			//构建函数的属性
			Drag.prototype = {
				//构造函数的属性prototype在赋值的时候清掉了它自身，
				//constructor:Drag是给它重新赋值
				constructor:Drag,
				dragDown:function(){
					var self = this;
					//鼠标按下要执行
					this.dragEle.onmousedown = function(ev){
						//记录鼠标的位置,this是这个div
						self.x = ev.clientX - this.offsetLeft;
						self.y = ev.clientY - this.offsetTop;
						self.dragMove();
						self.dragUp();
					}
				},
				dragMove:function(){
					var self = this;
					//鼠标移动时执行
					document.onmousemove = function(ev){
						//x等于鼠标移动触发时鼠标的位置减鼠标距离div边缘的位置。
						var x = ev.clientX - self.x;
						var y = ev.clientY - self.y;
						
						if( self.isRange ){
							if( x<self.minX ){
								x = self.minX;
							}
							if( y<self.minY ){
								y = self.minY;
							}
							if( x> self.maxX ){
								 x = self.maxX;
							}
							if( y > self.maxY ){
								 y = self.maxY;
							}
						}
						self.dragEle.style.left = x + 'px';
						self.dragEle.style.top = y + 'px';
					}
				},
				dragUp:function(){
					document.onmouseup = function(){
						document.onmouseup = document.onmousemove = null;
					}
				},
				//最大移动的范围
				Range:function(oPtions){
					
					this.isRange = true;
					//空数组存放方值
					var opt = oPtions||{};
					//限制x，y的最大范围
					this.maxX = opt.maxX||window.innerWidth - this.offsetLeft;
					this.maxY = opt.maxY||window.innerHeight - this.offsetTop;
					this.minX = opt.minX||0;
					this.minY = opt.minY||0;
				}
			};
			var fn = new Drag(div1);
			fn.Range({
				maxX:800,
				maxY:500,
				minX:10,
				minY:10
			})
		</script>
	</body>
</html>
